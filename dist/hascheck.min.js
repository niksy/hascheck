/*! hascheck 0.2.0 - Interface to Hrvatski akademski spelling checker. | Author: Ivan NikoliÄ‡, 2014 | License: MIT */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?module.exports=b(require("jquery")(require("jsdom").jsdom().createWindow())):a.hascheck=b(jQuery,a,document)}(this,function(a){function b(b){return b=a.trim(b),j[b]||(j[b]={dfd:a.Deferred(),called:!1}),j[b]}function c(b){var c={};return a.each(i,function(d,e){return e.text===a.trim(b)?(c=e,!1):void 0}),c}function d(b,c){return i.push({text:a.trim(b),results:c})}function e(b){var c,d=[],e=b.query.results;return e&&(c=e.hacheck.results.error)?(c.suspicious&&(c=[c]),a.each(c,function(a,b){var c=b.suggestions,e=c?c.word:[];d.push({suspicious:b.suspicious,suggestions:"string"==typeof e?e.split():e})}),d):d}function f(b){return a.ajax({url:"https://query.yahooapis.com/v1/public/yql",type:"get",dataType:"jsonp",cache:!0,data:{q:'select * from xml where url="http://hacheck.tel.fer.hr/xml.pl?textarea='+encodeURIComponent(a.trim(b))+'"',format:"json"}})}function g(b,d,e){var f=[],g=c(d).results||[];return!g.length&&e?void this.check(d).done(a.proxy(this["errors"===b?"getErrors":"getSuggestions"],this,d,e)):(a.each(g,function(a,c){return"errors"===b?void f.push(c.suspicious):void f.push(c)}),e&&e.call(null,f),f)}function h(){}var i=[],j={};return a.extend(h.prototype,{check:function(a){var g=b(a),h=g.dfd;if(c(a).results)h.resolve(c(a).results);else{if(g.called)return h.promise();g.called=g.called||!0,f(a).done(function(b){d(a,e(b)),h.resolve(c(a).results)})}return h.promise()},getErrors:function(a,b){return g.call(this,"errors",a,b)},getSuggestions:function(a,b){return g.call(this,"suggestions",a,b)}}),new h});